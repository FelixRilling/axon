var Axon=function(){"use strict";const n=(n,t)=>typeof n===t,t=Array.isArray,e=t=>n(t,"undefined"),i=n=>!e(n),o=(n,t)=>i(n[t]),u=n=>e(n)||null===n,c=Object.entries,r=(n,t)=>n.forEach(t),f=(n,t)=>{r(c(n),(e,i)=>{t(e[1],e[0],i,n)})},s=t=>!u(t)&&(n(t,"object")||n(t,"function")),a=n=>{const e=[];r(n,n=>{t(n)?e.push(...a(n)):e.push(n)});return e},l=Array.from,h=n=>t(n)?l(n):Object.assign({},n),d=n=>new Map(c(n)),p=(n,t,e)=>n.setAttribute("x-"+t,e),m=(n,t)=>n.hasAttribute("x-"+t),v=(n,t)=>n.removeAttribute("x-"+t),$=n=>n.name.startsWith("x-"),b=n=>l(n.attributes).filter($),y=n=>b(n).length>0,g=n=>b(n).map(n=>{const t=n.name.replace("x-","").split(":");return{name:t[0],opt:t[1]||"",content:n.value}}),x=n=>({set:(t,e,i)=>{i!==t[e]&&(t[e]=i,n.run(1));return!0}}),A=(n,t)=>{const e=n;f(e,(n,i)=>{s(n)&&(e[i]=A(n,t))});return new Proxy(n,t)},w=(n,t)=>A(n,x(t)),E=(n,t,e)=>a(l(t).map(t=>y(t)?new j(n,t,e):t.children.length>0?E(n,t.children,e):null).filter(n=>n)),j=class{constructor(n,t,e,i={}){const o=i;this.directives=g(t),this.data=w(o,this),this.$app=n,this.$element=t,this.$parent=e,this.$children=E(n,t.children,this)}run(n){return!!this.directives.map(t=>{if(this.$app.directives.has(t.name)){const e=this.$app.directives.get(t.name),i=e[n];if(i)return i(t,this.$element,this)}return!0}).every(n=>n)&&(this.$children.forEach(t=>t.run(n)),!0)}},N=(n,t,e)=>n.addEventListener(t,e),M=(n,t)=>typeof n===t,C=n=>M(n,"undefined"),L=n=>!C(n),O=(n,t)=>L(n[t]),k=n=>C(n)||null===n,H=Object.entries,S=n=>new Map(H(n)),T=(S({"===":(n,t)=>n===t,"!==":(n,t)=>n!==t,"&&":(n,t)=>n&&t,"||":(n,t)=>n||t,">=":(n,t)=>n>=t,"<=":(n,t)=>n<=t,">":(n,t)=>n>t,"<":(n,t)=>n<t}),S({"+":(n,t)=>n+t,"-":(n,t)=>n-t,"*":(n,t)=>n*t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,"**":(n,t)=>n**t}),/^["'`].*["'`]$/),B=n=>n.substr(1,n.length-2),P=(n,t,e=!1)=>{const i=t.split(/(?:\.|\[|\])+/g).map(n=>T.test(n)?B(n):n);let o=n;let u=null;let c=null;let r=0;for(;!k(o)&&r<i.length;){if(c=i[r],!O(o,c))return null;u=o,o=o[c],r++}return e?{index:r,key:c,val:o,container:u}:o},W=S({false:!1,true:!0,null:null}),q=/^.+\(.*\)$/,z=(n,t)=>{if(t)return!1;throw new Error(`missing prop/method '${n}'`)},D=(n,t=[])=>n.val.apply(n.node.data,[...n.args,...t]),F=(n,t)=>{let e=null;e=isNaN(Number(n))?T.test(n)?B(n):W.has(n)?W.get(n):I(n,t).val:Number(n);return e},G=(n,t,e=!1)=>{if(q.test(n)){const i=J(n,t,e),o=D(i);return{node:i.node,val:o}}return I(n,t,e)},I=(n,t,e=!1)=>{let i=t;for(;i;){const t=P(i.data,n,!0);if(null!==t)return t.node=i,t;i=i.$parent}return z(n,e)},J=(n,t,e=!1)=>{const o=n.match(/(.+)\s?\((.*)\)/);const u=i(o[2])?o[2].split(","):[];const c=P(t.$app.methods,o[1],!0);return null!==c?(c.args=u.map(n=>F(n,t)),c.node=t.$app.$entry,c):z(n,e)},K=n=>o(n,"value")?"value":o(n,"textContent")?"textContent":"innerHTML",Q=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden"),R=(n,t,e)=>{const i=Boolean(G(n.content,e,!0).val);Q(t,i);return i},U=d({if:{[0]:R,[1]:R},on:{[0]:(n,t,e)=>{N(t,n.opt,t=>D(J(n.content,e),[t]));return!0}},model:{[0]:(n,t,e)=>{const i=K(t);N(t,"input",()=>{const o=I(n.content,e);o.container[o.key]=t[i]});return!0},[1]:(n,t,e)=>{const i=K(t);const o=I(n.content,e);t[i]=o.val;return!0}},bind:{[1]:(n,t,e)=>{t.setAttribute(n.opt,G(n.content,e).val);return!0}},text:{[1]:(n,t,e)=>{t.textContent=String(G(n.content,e).val);return!0}},html:{[1]:(n,t,e)=>{t.innerHTML=String(G(n.content,e).val);return!0}},for:{[0]:(n,t)=>{p(t,"forbase","forbase");Q(t,!1);return!1},[1]:(n,t,e)=>{const i=n.content.match(/(.+) of (.+)/);const o=i[1];const u=I(i[2],e).val;e.$children=[];r(l(t.parentElement.children),n=>{m(n,"dyn")&&n.remove()});for(const n of u){const i=t.cloneNode(!0),u=h(e.data);p(i,"dyn","dyn"),v(i,"forbase"),v(i,"for"),Q(i,!0),u[o]=n;const c=t.insertAdjacentElement("beforebegin",i),r=new j(e.$app,c,e.$parent,u);e.$children.push(r),r.run(0)}return!0}}});return class{constructor(n){this.$entry=new j(this,n.el,null,n.data),this.methods=n.methods||{},this.directives=U,this.init(),this.render()}init(){return this.$entry.run(0)}render(){return this.$entry.run(1)}}}();
//# sourceMappingURL=axon.min.js.map
