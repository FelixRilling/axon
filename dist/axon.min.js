var Axon=function(){"use strict";const t=(t,n)=>typeof t===n,n=n=>t(n,"undefined"),e=t=>!n(t),r=t=>Array.isArray(t),i=(t,n)=>t.forEach(n),o=t=>Array.from(t),u=t=>{const n=[];return i(t,t=>{r(t)?n.push(...u(t)):n.push(t)}),n},s=t=>Object.entries(t),c=t=>new Map(s(t)),l=function(t,n=document,e=!1){return e?o(n.querySelectorAll(t)):n.querySelector(t)},a=(t,n,e)=>t.setAttribute("x-"+n,e),_=(t,n)=>t.hasAttribute("x-"+n),d=(t,n)=>t.removeAttribute("x-"+n),f=t=>t.name.startsWith("x-"),h=t=>o(t.attributes).filter(f),m=t=>h(t).length>0,p=function(t){return h(t).map(t=>{const n=t.name.replace("x-","").split(":");return{_content:t.value,_name:n[0],_opt:n[1]||!1}})},v=function(t,n,e){const r=function(n){return m(n)?new e(n,t,{}):n.children.length>0?i(n.children):null},i=t=>u(o(t).map(r).filter(t=>null!==t));return i(n)},b={get:(t,n)=>n in t.data?t.data[n]:t[n],set:(t,n,e)=>(n in t?t[n]=e:t.data[n]=e,!0)},g=function(t,n,e){t.addEventListener(n,e,!1)},x=/^[\d.-]+$/,y=/^["'`].*["'`]$/,A=/^.+\(.*\)$/,w=/([\w.]+)\s*\(((?:[^()]*)*)?\s*\)/,E=c({false:!1,true:!0,null:null}),S=function(t,n){return x.test(t)?Number(t):y.test(t)?t.substr(1,t.length-2):E.has(t)?E.get(t):k(t,n)._val},$=function(t,n){const r=n.split(".");let i,o=t,u=0;for(;u<r.length;){if(i=o[r[u]],e(i)){if(!(u<r.length-1))return{_val:i,_container:o,_key:r[u]};o=i}u++}return!1},j=t=>new Error(`missing prop/method '${t}'`),C=t=>t._val.apply(t._node,t._args),L=function(t){let n=t;for(;null!==n._parent;)n=n._parent;return n},M=function(t,n,e=!1){if(A.test(t)){const r=q(t,n,e),i=C(r);return{_node:r.node,_val:i}}return k(t,n,e)},k=function(t,n,e=!1){let r=n;for(;r&&!1!==r._parent;){const n=$(r.data,t);if(!1!==n)return n._node=r,n;r=r._parent}if(e)return!1;throw j(t)},q=function(t,n,r=!1){const i=t.match(w),o=e(i[2])?i[2].split(","):[],u=L(n),s=$(u.methods,i[1]);if(!1!==s)return s._args=o.map(t=>S(t,n)),s._node=u,s;if(r)return!1;throw j(t)},H=function(t){return e(t.value)?"value":e(t.textContent)?"textContent":"innerHTML"},N=(t,n)=>n?t.removeAttribute("hidden"):t.setAttribute("hidden",!0),O=/(\w+) in (\w+)/,T=function(t,n){const e=n._element,r=Boolean(M(t._content,n,!0)._val);return N(e,r),r},B=c({model:{_init:function(t,n){const e=n._element,r=H(e);return g(e,"input",function(){const i=k(t._content,n);i._container[i._key]=e[r],i._node.render()}),!0},_render:function(t,n){const e=n._element,r=H(e),i=k(t._content,n);return e[r]=String(i._val),!0}},bind:{_render:function(t,n){return n._element.setAttribute(t._opt,M(t._content,n)._val),!0}},for:{_init:function(t,n){const e=n._element;return a(n._element,"forbase",!0),N(e,!1),!1},_render:function(t,n,e){const r=n._element,u=O.exec(t._content),s=u[1],c=k(u[2],n)._val,l=[];i(o(r.parentElement.children),t=>{_(t,"dyn")&&t.remove()});for(let t of c){const i=r.cloneNode(!0),o=Object.assign({},n.data);let u;a(i,"dyn",!0),d(i,"forbase"),d(i,"for"),N(i,!0),o[s]=t,u=r.insertAdjacentElement("beforebegin",i),l.push(new e(u,n._parent,o))}return n._children=l,!0}},text:{_render:function(t,n){return n._element.textContent=String(M(t._content,n)._val),!0}},html:{_render:function(t,n){return n._element.innerHTML=String(M(t._content,n)._val),!0}},if:{_init:T,_render:T},on:{_init:function(t,n){return g(n._element,t._opt,()=>C(q(t._content,n))),!0}}}),P=class{constructor(t=null,n=null,e={},r=!1){const i=new Proxy(this,b);return this.data=e,this.directives=p(t),this._element=t,this._parent=n,this._children=v(i,t.children,P),r?[this,i]:i}run(t){return!!this.directives.map(n=>{if(B.has(n._name)){const e=B.get(n._name);if(e[t])return e[t](n,this,P)}return!0}).every(t=>!0===t)&&this._children.map(n=>n.run(t))}init(){return this.run("_init")}render(){return this.run("_render")}};return class extends P{constructor(t={}){const n=super(l(t.el),null,t.data,!0);return n[0].methods=t.methods||{},n[0].init(),n[0].render(),n[1]}}}();