var Axon=function(){"use strict";const n=(n,t)=>typeof n===t,t=Array.isArray,e=t=>n(t,"undefined"),o=n=>!e(n),i=n=>e(n)||null===n,u=Object.entries,c=(n,t)=>n.forEach(t),r=(n,t)=>{c(u(n),(e,o)=>{t(e[1],e[0],o,n)})},f=t=>!i(t)&&(n(t,"object")||n(t,"function")),s=n=>{const e=[];c(n,n=>{t(n)?e.push(...s(n)):e.push(n)});return e},a=Array.from,l=n=>t(n)?a(n):Object.assign({},n),h=n=>new Map(u(n)),d=(n,t,e)=>n.setAttribute("x-"+t,e),p=(n,t)=>n.hasAttribute("x-"+t),m=(n,t)=>n.removeAttribute("x-"+t),v=n=>n.name.startsWith("x-"),b=n=>a(n.attributes).filter(v),g=n=>b(n).length>0,y=n=>b(n).map(n=>{const t=n.name.replace("x-","").split(":");return{name:t[0],opt:t[1]||"",content:n.value}}),$=n=>({set:(t,e,o)=>{o!==t[e]&&(t[e]=o,n.run(1));return!0}}),x=(n,t)=>{const e=n;r(e,(n,o)=>{f(n)&&(e[o]=x(n,t))});return new Proxy(n,t)},A=(n,t)=>x(n,$(t)),w=(n,t,e)=>n.addEventListener(t,e),E=(n,t)=>typeof n===t,j=n=>E(n,"undefined"),N=n=>!j(n),M=(n,t)=>N(n[t]),C=n=>j(n)||null===n,L=Object.entries,O=n=>new Map(L(n)),k=(O({"===":(n,t)=>n===t,"!==":(n,t)=>n!==t,"&&":(n,t)=>n&&t,"||":(n,t)=>n||t,">=":(n,t)=>n>=t,"<=":(n,t)=>n<=t,">":(n,t)=>n>t,"<":(n,t)=>n<t}),O({"+":(n,t)=>n+t,"-":(n,t)=>n-t,"*":(n,t)=>n*t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,"**":(n,t)=>n**t}),/^["'`].*["'`]$/),H=n=>n.substr(1,n.length-2),S=(n,t,e=!1)=>{const o=t.split(/(?:\.|\[|\])+/g).map(n=>k.test(n)?H(n):n);let i=n;let u=null;let c=null;let r=0;for(;!C(i)&&r<o.length;){if(c=o[r],!M(i,c))return null;u=i,i=i[c],r++}return e?{index:r,key:c,val:i,container:u}:i},T=O({false:!1,true:!0,null:null}),B=/^.+\(.*\)$/,P=(n,t)=>{if(t)return!1;throw new Error(`missing prop/method '${n}'`)},W=(n,t=[])=>n.val.apply(n.node.data,[...n.args,...t]),q=(n,t)=>{let e=null;e=isNaN(Number(n))?k.test(n)?H(n):T.has(n)?T.get(n):D(n,t).val:Number(n);return e},z=(n,t,e=!1)=>{if(B.test(n)){const o=F(n,t,e),i=W(o);return{node:o.node,val:i}}return D(n,t,e)},D=(n,t,e=!1)=>{let o=t;for(;o;){const t=S(o.data,n,!0);if(null!==t)return t.node=o,t;o=o.$parent}return P(n,e)},F=(n,t,e=!1)=>{const i=n.match(/(.+)\s?\((.*)\)/);const u=Q(t);const c=o(i[2])?i[2].split(","):[];const r=S(u.methods,i[1],!0);return null!==r?(r.args=c.map(n=>q(n,t)),r.node=u,r):P(n,e)},G=n=>o(n.value)?"value":o(n.textContent)?"textContent":"innerHTML",I=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden"),J=(n,t,e)=>{const o=Boolean(z(n.content,e,!0).val);I(t,o);return o},K=h({if:{[0]:J,[1]:J},on:{[0]:(n,t,e)=>{w(t,n.opt,t=>W(F(n.content,e),[t]));return!0}},model:{[0]:(n,t,e)=>{const o=G(t);w(t,"input",()=>{const i=D(n.content,e);i.container[i.key]=t[o]});return!0},[1]:(n,t,e)=>{const o=G(t);const i=D(n.content,e);t[o]=i.val;return!0}},bind:{[1]:(n,t,e)=>{t.setAttribute(n.opt,z(n.content,e).val);return!0}},text:{[1]:(n,t,e)=>{t.textContent=String(z(n.content,e).val);return!0}},html:{[1]:(n,t,e)=>{t.innerHTML=String(z(n.content,e).val);return!0}},for:{[0]:(n,t)=>{d(t,"forbase","forbase");I(t,!1);return!1},[1]:(n,t,e)=>{const o=n.content.match(/(.+) of (.+)/);const i=o[1];const u=D(o[2],e).val;e.$children=[];c(a(t.parentElement.children),n=>{p(n,"dyn")&&n.remove()});for(const n of u){const o=t.cloneNode(!0),u=l(e.data);let c,r;d(o,"dyn","dyn"),m(o,"forbase"),m(o,"for"),I(o,!0),u[i]=n,c=t.insertAdjacentElement("beforebegin",o),r=new U(c,e.$parent,u),e.$children.push(r),r.run(0)}return!0}}}),Q=n=>{let t=n;for(;null!==t.$parent;)t=t.$parent;return t},R=(n,t)=>s(a(n).map(n=>g(n)?new U(n,t):n.children.length>0?R(n.children,t):null).filter(n=>n)),U=class{constructor(n,t,e={}){const o=e;this.directives=y(n),this.data=A(o,this),this.$element=n,this.$parent=t,this.$children=R(n.children,this)}run(n){return!!this.directives.map(t=>{if(K.has(t.name)){const e=K.get(t.name),o=e[n];if(o)return o(t,this.$element,this)}return!0}).every(n=>n)&&(this.$children.forEach(t=>t.run(n)),!0)}};return class extends U{constructor(n){super(n.el,null,n.data),this.methods=n.methods||{},this.init(),this.render()}init(){return this.run(0)}render(){return this.run(1)}}}();
//# sourceMappingURL=axon.min.js.map
