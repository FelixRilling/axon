var Axon=function(){"use strict";const n=(n,t)=>typeof n===t,t=Array.isArray,e=t=>n(t,"undefined"),i=n=>null==n,o=(n,t)=>{Object.entries(n).forEach((e,i)=>{t(e[0],e[1],i,n)})},r=t=>!i(t)&&(n(t,"object")||n(t,"function")),u=n=>Object.assign({},n),c=n=>new Map(Object.entries(n)),f=(n,t)=>typeof n===t,s=n=>f(n,"undefined"),a=n=>s(n)||null===n,l=n=>new Map(Object.entries(n)),h=(l({"===":(n,t)=>n===t,"!==":(n,t)=>n!==t,"&&":(n,t)=>n&&t,"||":(n,t)=>n||t,">=":(n,t)=>n>=t,"<=":(n,t)=>n<=t,">":(n,t)=>n>t,"<":(n,t)=>n<t}),n=>n.substr(1,n.length-2)),d=l({false:!1,true:!0,null:null}),p=/^["'`].*["'`]$/,m=(n,t,e=!1)=>{const i=t.split(/(?:\.|\[|\])+/g).map(n=>p.test(n)?h(n):n);let o=n;let r=null;let u=null;let c=0;for(;!a(o)&&c<i.length;){if(u=i[c],s(o[u]))return null;r=o,o=o[u],c++}return e?{index:c,key:u,val:o,container:r}:o},v=(l({"+":(n,t)=>n+t,"-":(n,t)=>n-t,"*":(n,t)=>n*t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,"**":(n,t)=>n**t}),/^.+\(.*\)$/),b=(n,t)=>{if(t)return!1;throw new Error(`missing prop/method '${n}'`)},y=(n,t=[])=>n.val.apply(n.node.data,[...n.args,...t]),$=(n,t)=>{let e=null;e=isNaN(Number(n))?p.test(n)?h(n):d.has(n)?d.get(n):x(n,t).val:Number(n);return e},g=(n,t,e=!1)=>{if(v.test(n)){const i=A(n,t,e),o=y(i);return{node:i.node,val:o}}return x(n,t,e)},x=(n,t,e=!1)=>{let i=t;for(;i;){const t=m(i.data,n,!0);if(null!==t)return t.node=i,t;i=i.$parent}return b(n,e)},A=(n,t,i=!1)=>{const o=n.match(/(.+)\s?\((.*)\)/);const r=e(o[2])?[]:o[2].split(",");const u=m(t.$app.methods,o[1],!0);if(null!==u)return u.args=r.map(n=>$(n,t)),u.node=t.$app.$entry,u;return b(n,i)},w=(n,t,e)=>n.setAttribute("x-"+t,e),E=(n,t)=>n.hasAttribute("x-"+t),j=(n,t)=>n.removeAttribute("x-"+t),N=n=>n.name.startsWith("x-"),k=n=>Array.from(n.attributes).filter(N),M=n=>k(n).length>0,O=n=>k(n).map(n=>{const t=n.name.replace("x-","").split(":");return{name:t[0],opt:t[1]||"",content:n.value}}),C=(n,t,e)=>n.addEventListener(t,e),L=n=>"checkbox"===n.type||"radio"===n.type,H=n=>L(n)?"change":"input",S=n=>{if(!e(n.value))return L(n)?"checked":"value";if(!e(n.textContent))return"textContent";return"innerHTML"},T=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden"),B=n=>({set:(t,e,i)=>{i!==t[e]&&(t[e]=i,n.run(1));return!0}}),P=(n,t)=>{const e=n;o(e,(n,i)=>{r(i)&&(e[n]=P(i,t))});return new Proxy(n,t)},W=(n,t)=>P(n,B(t)),q=n=>{const e=[];n.forEach(n=>{t(n)?e.push(...q(n)):e.push(n)});return e},z=(n,t,e)=>q(Array.from(t).map(t=>{if(M(t))return new D(n,t,e);if(t.children.length>0)return z(n,t.children,e);return null}).filter(n=>n)),D=class{constructor(n,t,e,i={}){const o=i;this.directives=O(t),this.data=W(o,this),this.$app=n,this.$element=t,this.$parent=e,this.$children=z(n,t.children,this)}run(n){return!!this.directives.map(t=>{if(this.$app.directives.has(t.name)){const e=this.$app.directives.get(t.name),i=e[n];if(i)return i(t,this.$element,this)}return!0}).every(n=>n)&&(this.$children.forEach(t=>t.run(n)),!0)}},F=c({if:{[1]:(n,t,e)=>{const i=Boolean(g(n.content,e,!0).val);T(t,i);return i}},on:{[0]:(n,t,e)=>{C(t,n.opt,t=>y(A(n.content,e),[t]));return!0}},model:{[0]:(n,t,e)=>{const i=S(t);const o=H(t);C(t,o,()=>{const o=x(n.content,e);o.container[o.key]=t[i]});return!0},[1]:(n,t,e)=>{const i=S(t);const o=x(n.content,e);t[i]=o.val;return!0}},bind:{[1]:(n,t,e)=>{t.setAttribute(n.opt,g(n.content,e).val);return!0}},text:{[1]:(n,t,e)=>{t.textContent=String(g(n.content,e).val);return!0}},html:{[1]:(n,t,e)=>{t.innerHTML=String(g(n.content,e).val);return!0}},for:{[0]:(n,t)=>{w(t,"forbase","forbase");T(t,!1);return!1},[1]:(n,t,e)=>{const i=n.content.match(/(.+) of (.+)/);const o=i[1];const r=x(i[2],e).val;e.$children=[];Array.from(t.parentElement.children).forEach(n=>{E(n,"dyn")&&n.remove()});for(const n of r){const i=t.cloneNode(!0),r=u(e.data);w(i,"dyn","dyn"),j(i,"forbase"),j(i,"for"),T(i,!0),r[o]=n;const c=t.insertAdjacentElement("beforebegin",i),f=new D(e.$app,c,e.$parent,r);e.$children.push(f),f.run(0)}return!0}}});return class{constructor(n){this.$entry=new D(this,n.el,null,n.data),this.methods=n.methods||{},this.directives=F,this.init(),this.render()}init(){return this.$entry.run(0)}render(){return this.$entry.run(1)}}}();
//# sourceMappingURL=axon.min.js.map
