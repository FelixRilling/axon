var Axon=function(){"use strict";const n=n=>Array.from(n),t=n=>Array.isArray(n),e=function(n){const r=[];return n.forEach(n=>{t(n)?r.push(...e(n)):r.push(n)}),r},r=n=>void 0!==n,i=function(t,e=document,r=!1){return r?n(e.querySelectorAll(t)):e.querySelector(t)},u=n=>n.name.startsWith("x-"),o=t=>n(t.attributes).some(u),c=function(t){return n(t.attributes).filter(u).map(n=>{const t=n.name.replace("x-","").split(":");const e=n.value;return{val:e,name:t[0],opt:t[1]||!1}})},s=function(n,t,e){return n.addEventListener(t,e,!1)},l=/\(.*\)/,a=/([\w\.]+)\s*\(((?:[^()]+)*)?\s*\)\s*/,f=function(n){let t=n;for(;null!==t._parent;)t=t._parent;return t},d=function(n,t){const e=t.split(".");let i,u=n,o=0;for(;o<e.length;){const n=e[o];if(i=u[n],r(i)){if(!(o<e.length-1))return{val:i,set:t=>u[n]=t};u=i}o++}return!1},h=n=>n.val.apply(n.node.data,n.args),m=function(n,t){return l.test(n)?h(p(n,t)):v(n,t)},v=function(n,t){let e=t;for(;!1!==e._parent;){const t=d(e.data,n);if(!1!==t)return t.node=e,t;e=e._parent}return!1},p=function(n,t){const e=n.match(a),i=r(e[2])?e[2].split(","):[],u=f(t),o=d(u.methods,e[1]);return!1!==o&&(o.args=i,o.node=u,o)},_=function(n){return r(n.value)?"value":r(n.textContent)?"textContent":"innerHTML"},A=function(n,t){const e=t._element;return m(n.val,t).val?(e.removeAttribute("hidden"),!0):(e.setAttribute("hidden",!0),!1)},x={model:{init:function(n,t){const e=t._element,r=_(e);return s(e,"input",function(){const i=v(n.val,t);i.set(e[r]),i.node.render()}),!0},render:function(n,t){const e=t._element,r=_(e),i=v(n.val,t);return e[r]=String(i.val),!0}},bind:{render:function(n,t){return t._element.setAttribute(n.opt,m(n.val,t).val),!0}},text:{render:function(n,t){return t._element.textContent=m(n.val,t).val,!0}},html:{render:function(n,t){return t._element.innerHTML=m(n.val,t).val,!0}},if:{init:A,render:A},on:{init:function(n,t){const e=p(n.val,t);return s(t._element,n.opt,()=>h(e)),!0}}},y=class{constructor(t={},r=null,i=null){const u=this,s=function(n){return o(n)?new y({},n,u):n.children.length>0?l(n.children):null},l=t=>e(n(t).map(s).filter(n=>null!==n));this.data=t,this.directives=c(r),this._element=r,this._parent=i,this._children=l(r.children)}run(n){return this.directives.map(t=>{const e=x[t.name];return!e||(!e[n]||e[n](t,this))}).every(n=>!1!==n)}runDeep(n){const t=this.run(n);return t&&this._children.forEach(t=>{t.run(n)}),t}init(){return this.runDeep("init")}render(){return this.runDeep("render")}};return class extends y{constructor(n){super(n.data,i(n.el)),this.methods=n.methods||{},this.init(),this.render()}}}();