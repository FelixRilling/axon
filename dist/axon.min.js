var Axon=function(){"use strict";const n=n=>Array.isArray(n),t=(n,t)=>typeof n===t,e=n=>t(n,"undefined"),r=n=>!e(n),i=n=>Object.entries(n),o=(n,t)=>n.forEach(t),u=n=>Array.from(n),c=t=>{const e=[];o(t,t=>{n(t)?e.push(...c(t)):e.push(t)});return e},f=n=>Object.assign({},n),s=n=>new Map(i(n)),a=(n,t,e)=>n.setAttribute("x-"+t,e),l=(n,t)=>n.hasAttribute("x-"+t),d=(n,t)=>n.removeAttribute("x-"+t),h=n=>n.name.startsWith("x-"),m=n=>u(n.attributes).filter(h),p=n=>m(n).length>0,$=function(n){return m(n).map(n=>{const t=n.name.replace("x-","").split(":");return{name:t[0],opt:t[1]||!1,content:n.value}})},v=function(n,t){const e=function(t){return p(t)?new W(t,n,{}):t.children.length>0?r(t.children):null},r=n=>c(u(n).map(e).filter(n=>null!==n));return r(t)},b={get:(n,t)=>t in n.data?n.data[t]:n[t],set:(n,t,e)=>{t in n?n[t]=e:n.data[t]=e;return!0}},g=function(n,t,e){n.addEventListener(t,e,!1)},x=/^[\d.-]+$/,y=/^["'`].*["'`]$/,A=/^.+\(.*\)$/,w=s({false:!1,true:!0,null:null}),E=function(n,t){return x.test(n)?Number(n):y.test(n)?n.substr(1,n.length-2):w.has(n)?w.get(n):k(n,t)._val},j=function(n,t){const e=t.split(".");let i,o=n,u=0;for(;u<e.length;){if(i=o[e[u]],r(i)){if(!(u<e.length-1))return{val:i,container:o,key:e[u]};o=i}u++}return!1},C=n=>new Error(`missing prop/method '${n}'`),L=n=>n.val.apply(n.node,n.args),M=function(n){let t=n;for(;null!==t.$parent;)t=t.$parent;return t},S=function(n,t,e=!1){if(A.test(n)){const r=H(n,t,e),i=L(r);return{node:r.node,val:i}}return k(n,t,e)},k=function(n,t,e=!1){let r=t;for(;r&&!1!==r.$parent;){const t=j(r.data,n);if(!1!==t)return t.node=r,t;r=r.$parent}if(e)return!1;throw C(n)},H=function(n,t,e=!1){const i=n.match(/([\w.]+)\s*\(((?:[^()]*)*)?\s*\)/),o=r(i[2])?i[2].split(","):[],u=M(t),c=j(u.methods,i[1]);if(!1!==c)return c.args=o.map(n=>E(n,t)),c.node=u,c;if(e)return!1;throw C(n)},N=function(n){return r(n.value)?"value":r(n.textContent)?"textContent":"innerHTML"},O=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden",!0),T=/(.+) in (.+)/,B=function(n,t){const e=t.$element,r=Boolean(S(n.content,t,!0).val);return O(e,r),r},P=s({model:{init:function(n,t){const e=t.$element,r=N(e);return g(e,"input",function(){const i=k(n.content,t);i.container[i.key]=e[r],i.node.render()}),!0},render:function(n,t){const e=t.$element,r=N(e),i=k(n.content,t);return e[r]=String(i.val),!0}},bind:{render:function(n,t){return t.$element.setAttribute(n.opt,S(n.content,t).val),!0}},for:{init:function(n,t){const e=t.$element;return a(t.$element,"forbase",!0),O(e,!1),!1},render:function(n,t){const e=t.$element,r=T.exec(n.content),i=r[1],c=k(r[2],t).val,s=[];o(u(e.parentElement.children),n=>{l(n,"dyn")&&n.remove()});for(let n of c){const r=e.cloneNode(!0),o=f(t.data);let u;a(r,"dyn",!0),d(r,"forbase"),d(r,"for"),O(r,!0),o[i]=n,u=e.insertAdjacentElement("beforebegin",r),s.push(new W(u,t.$parent,o))}return t.$children=s,!0}},text:{render:function(n,t){return t.$element.textContent=String(S(n.content,t).val),!0}},html:{render:function(n,t){return t.$element.innerHTML=String(S(n.content,t).val),!0}},if:{init:B,render:B},on:{init:function(n,t){return g(t.$element,n.opt,()=>L(H(n.content,t))),!0}}}),W=class{constructor(n=null,t=null,e={},r=!1){let i;return this.data=e,this.directives=$(n),this.$element=n,this.$parent=t,i=new Proxy(this,b),this.$children=v(i,n.children),r?[this,i]:i}run(n){const t=t=>{if(P.has(t.name)){const e=P.get(t.name);if(e[n])return e[n](t,this)}return!0};return!!this.directives.map(t).every(n=>!0===n)&&this.$children.map(t=>t.run(n))}init(){return this.run("init")}render(){return this.run("render")}};return class extends W{constructor(n={}){const t=super(n.el,null,n.data,!0);return t[0].methods=n.methods||{},t[0].init(),t[0].render(),t[1]}}}();
