var Axon=function(){"use strict";function n(n,t){for(var e=n.length,r=0;r<e;)t(n[r],r),r++}function t(n,t){for(var e=Object.keys(n),r=e.length,o=0;o<r;){var i=e[o];t(n[i],i,o),o++}}function e(n,t,e,r){return n.substr(0,r)+n.substr(r).replace(t,e)}var r=function(n,t){var e=this;return e[n]=function(r,o,i){return e.provider(n,t,r,o,i)},e},o=function(n,t,e){var r=[],o=void 0;return n.deps.forEach(function(n){var e=t[n];e&&r.push(e.fn)}),o=e(n,r),o.rdy=!0,o},i=function n(t,e,r){e.deps.forEach(function(o){var i=t.get(o);if(!i)throw new Error(e.name+" is missing dep '"+o+"'");n(t,i,r),r(i)})},c=function(n,t,e){var r={};return i(n,t,function(n){r[n.name]=n.rdy?n:n.init()}),o(t,r,e)},u=function(n,t,e,r,o){var i=this,u={type:n,name:e,deps:r,fn:o,rdy:!1,init:function(){return c(i.chev,u,t)}};return i.chev.set(e,u),i},f=function(n){return this.chev.get(n).init().fn},a=function(n,t){var e=n.fn;return n.fn=function(){return e.apply(null,t.concat(Array.from(arguments)))},n},s=function(n,t){return t.unshift(0),n.fn=new(Function.prototype.bind.apply(n.fn,t)),n},v=function(){var n=this;n.chev=new Map,n.extend("service",a),n.extend("factory",s)};v.prototype={extend:r,provider:u,access:f};var d=window,l=d.document,p="xn",h=/{{(.+)}}/g,x=function(n,t){return t&&"*"!==t?"["+p+"-"+n+"='"+t+"']":"["+p+"-"+n+"]"},y=function(n,t,e){return(e?e:l).querySelectorAll(x(n,t))},m=function(n,t){return n.attributes[p+"-"+t].value},g={onBind:function(n,t){function e(n){var t=[];for(n=n.firstChild;n;n=n.nextSibling)3===n.nodeType&&"SCRIPT"!==n.parentNode.nodeName?t.push(n):t=t.concat(e(n));return t}var r=[],o=e(t),i=void 0;return o.forEach(function(n){for(;null!==(i=h.exec(n.textContent));)i.index===h.lastIndex&&h.lastIndex++,r.push({match:i[0],data:i[1],val:i[0],index:i.index,parent:n})}),r},onDigest:function(n,t,r){var o=n[r.data];return r.parent.textContent=e(r.parent.textContent,r.val,o,r.index),r.val=o,o}},$={text:g},w=function(n){function e(n,e,r){t(n,function(n,t){var o=e[t];o.forEach(function(t){r(t,n)})})}e(C,n.$directives,function(t,e){e.onDigest(n,n.$context,t)}),e($,n.$expressions,function(t,e){e.onDigest(n,n.$context,t)})},E=function(t,e,r){n(t,function(n){function t(t){return r(t,n)}n.addEventListener(e,t,!1)})},b={onBind:function(t,e){function r(n,e){d.setTimeout(function(){var n=e.value,r=m(e,"model");console.log("MODEL:",r,n),t[r]=n,w(t)},5)}var o=[],i=y("model","*",e);return E(i,"change",r),E(i,"input",r),n(i,function(n,t){o.push({index:t,element:n,type:"model",value:m(n,"model")})}),o},onDigest:function(n,t,e){e.element.value=n[e.value]}},C={model:b},D=function(n){var e={};return t(C,function(t,r,o){e[r]=t.onBind(n,n.$context)}),e},A=function(n){var e={};return t($,function(t,r,o){e[r]=t.onBind(n,n.$context)}),e},B=function(n,t){t.unshift(null);var e=n.fn=new(Function.prototype.bind.apply(n.fn,t));return e.$context=y("controller",n.name)[0],e.$expressions=A(e),e.$directives=D(e),w(e),console.log(n),n},I=function(n){var t=this;t.id=n,t.cv=new v(n+"Container"),t.context=y("app",n)[0],t.cv.extend("controller",B)},S=["access","extend","provider","service","factory","controller"];return S.forEach(function(n){I.prototype[n]=function(){return this.cv[n].apply(this.cv,Array.from(arguments))}}),I}();
//# sourceMappingURL=axon.min.js.map
