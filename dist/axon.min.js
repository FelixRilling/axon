var Axon=function(){"use strict";const n=n=>Array.from(n),t=n=>Array.isArray(n),e=function(n){const r=[];return n.forEach(n=>{t(n)?r.push(...e(n)):r.push(n)}),r},r=n=>void 0!==n,o=function(t,e=document,r=!1){return r?n(e.querySelectorAll(t)):e.querySelector(t)},i=(n,t,e)=>n.setAttribute("x-"+t,e),u=(n,t)=>n.hasAttribute("x-"+t),c=(n,t)=>n.removeAttribute("x-"+t),l=n=>n.name.startsWith("x-"),f=t=>n(t.attributes).filter(l),s=n=>f(n).length>0,a=function(n){return f(n).map(n=>{const t=n.name.replace("x-","").split(":");const e=n.value;return{val:e,name:t[0],opt:t[1]||!1}})},d=function(t,r,o){const i=function(n){return s(n)?new o(n,t,{}):n.children.length>0?u(n.children):null},u=t=>e(n(t).map(i).filter(n=>null!==n));return u(r)},h={get:(n,t)=>t in n.data?n.data[t]:n[t]},m=function(n,t,e){n.addEventListener(t,e,!1)},v=/\(.*\)/,p=/^[\d\.]+$/,_=/^'\w+'$/,y=/([\w\.]+)\s*\(((?:[^()]*)*)?\s*\)/,g=n=>new Error(`missing prop/method '${n}'`),b=n=>n.val.apply(n.node,n.args),x=function(n,t){return p.test(n)?Number(n):_.test(n)?n.substr(1,n.length-2):C(n,t)},A=function(n){let t=n;for(;null!==t._parent;)t=t._parent;return t},w=function(n,t){const e=t.split(".");let o,i=n,u=0;for(;u<e.length;){const n=e[u];if(o=i[n],r(o)){if(!(u<e.length-1))return{val:o,con:i,key:n};i=o}u++}return!1},E=function(n,t,e=!1){if(v.test(n)){const r=L(n,t,e),o=b(r);return{node:r.node,val:o}}return C(n,t,e)},C=function(n,t,e=!1){let r=t;for(;r&&!1!==r._parent;){const t=w(r.data,n);if(!1!==t)return t.node=r,t;r=r._parent}if(e)return!1;throw g(n)},L=function(n,t,e=!1){const o=n.match(y),i=r(o[2])?o[2].split(","):[],u=A(t),c=w(u.methods,o[1]);if(!1!==c)return c.args=i.map(n=>x(n,t)),c.node=u,c;if(e)return!1;throw g(n)},N=function(n){return r(n.value)?"value":r(n.textContent)?"textContent":"innerHTML"},S=function(t){n(t.children).forEach(n=>{console.log([n,u(n,"dyn")]);u(n,"dyn")&&n.remove()})},k=function(n,t){const e=t._element;return E(n.val,t,!0).val?(e.removeAttribute("hidden"),!0):(e.setAttribute("hidden",!0),!1)},q={model:{init:function(n,t){const e=t._element,r=N(e);return m(e,"input",function(){const o=C(n.val,t);o.con[o.key]=e[r],o.node.render()}),!0},render:function(n,t){const e=t._element,r=N(e),o=C(n.val,t);return e[r]=String(o.val),!0}},bind:{render:function(n,t){return t._element.setAttribute(n.opt,E(n.val,t).val),!0}},for:{render:function(n,t,e){const r=n.val.split(" "),o=r[0],u=C(r[2],t).val,l=[],f=t._element;S(f.parentElement);for(let n of u){const r=f.cloneNode(),u=Object.assign({},t.data);i(r,"dyn",!0),c(r,"for"),u[o]=n,l.push(new e(f.appendChild(r),t._parent,u))}return console.log({element:f,nodesNew:l}),t._children=l,!0}},text:{render:function(n,t){return t._element.textContent=E(n.val,t).val,!0}},html:{render:function(n,t){return t._element.innerHTML=E(n.val,t).val,!0}},if:{init:k,render:k},on:{init:function(n,t){const e=L(n.val,t);return m(t._element,n.opt,()=>b(e)),!0}}},H=class{constructor(n=null,t=null,e={}){const r=new Proxy(this,h);return r.data=e,r._element=n,r._parent=t,r._children=d(r,n.children,H),r.directives=a(n),r}run(n){const t=t=>{const e=q[t.name];return!e||!e[n]||e[n](t,this,H)};return!!this.directives.map(t).every(n=>!0===n)&&this._children.map(t=>t.run(n))}init(){return this.run("init")}render(){return this.run("render")}};return class extends H{constructor(n={}){super(o(n.el),null,n.data),this.methods=n.methods||{},this.init(),this.render()}}}();