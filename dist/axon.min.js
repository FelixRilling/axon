var Axon=function(){"use strict";const n=(n,t)=>typeof n===t,t=Array.isArray,e=t=>n(t,"undefined"),i=n=>!e(n),o=n=>e(n)||null===n,u=Object.entries,r=(n,t)=>n.forEach(t),c=(n,t)=>{r(u(n),(e,i)=>{t(e[1],e[0],i,n)})},f=t=>!o(t)&&(n(t,"object")||n(t,"function")),s=n=>{const e=[];r(n,n=>{t(n)?e.push(...s(n)):e.push(n)});return e},l=Array.from,a=n=>t(n)?l(n):Object.assign({},n),d=n=>new Map(u(n)),h=(n,t,e)=>n.setAttribute("x-"+t,e),p=(n,t)=>n.hasAttribute("x-"+t),m=(n,t)=>n.removeAttribute("x-"+t),v=n=>n.name.startsWith("x-"),b=n=>l(n.attributes).filter(v),g=n=>b(n).length>0,$=n=>b(n).map(n=>{const t=n.name.replace("x-","").split(":");return{name:t[0],opt:t[1]||!1,content:n.value}}),x=n=>({set:(t,e,i)=>{i!==t[e]&&(t[e]=i,n.render());return!0}}),y=(n,t)=>{const e=n;c(e,(n,i)=>{f(n)&&(e[i]=y(n,t))});return new Proxy(n,t)},A=(n,t)=>y(n,x(t)),w=(n,t,e)=>n.addEventListener(t,e),j=(n,t)=>typeof n===t,E=n=>j(n,"undefined"),N=n=>!E(n),M=(n,t)=>N(n[t]),C=n=>E(n)||null===n,L=Object.entries,O=n=>new Map(L(n)),k=(O({"===":(n,t)=>n===t,"!==":(n,t)=>n!==t,"&&":(n,t)=>n&&t,"||":(n,t)=>n||t,">=":(n,t)=>n>=t,"<=":(n,t)=>n<=t,">":(n,t)=>n>t,"<":(n,t)=>n<t}),O({"+":(n,t)=>n+t,"-":(n,t)=>n-t,"*":(n,t)=>n*t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,"**":(n,t)=>n**t}),/^["'`].*["'`]$/),H=n=>n.substr(1,n.length-2),S=(n,t,e=!1)=>{const i=t.split(/(?:\.|\[|\])+/g).map(n=>k.test(n)?H(n):n);let o=n;let u=null;let r=null;let c=0;for(;!C(o)&&c<i.length;){if(r=i[c],!M(o,r))return null;u=o,o=o[r],c++}return e?{index:c,key:r,val:o,container:u}:o},T=O({false:!1,true:!0,null:null}),B=/^.+\(.*\)$/,P=n=>{let t=n;for(;null!==t.$parent;)t=t.$parent;return t},W=(n,t)=>{if(t)return!1;throw new Error(`missing prop/method '${n}'`)},q=(n,t=[])=>n.val.apply(n.node.data,[...n.args,...t]),z=(n,t)=>{let e=null;e=isNaN(Number(n))?k.test(n)?H(n):T.has(n)?T.get(n):F(n,t).val:Number(n);return e},D=(n,t,e=!1)=>{if(B.test(n)){const i=G(n,t,e),o=q(i);return{node:i.node,val:o}}return F(n,t,e)},F=(n,t,e=!1)=>{let i=t;for(;i;){const t=S(i.data,n,!0);if(null!==t)return t.node=i,t;i=i.$parent}return W(n,e)},G=(n,t,e=!1)=>{const o=n.match(/(.+)\s?\((.*)\)/);const u=i(o[2])?o[2].split(","):[];const r=P(t);const c=S(r.methods,o[1],!0);return null!==c?(c.args=u.map(n=>z(n,t)),c.node=r,c):W(n,e)},I=n=>i(n.value)?"value":i(n.textContent)?"textContent":"innerHTML",J=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden",!0),K=function(n,t,e){const i=Boolean(D(n.content,e,!0).val);return J(t,i),i},Q=d({if:{init:K,render:K},on:{init:function(n,t,e){return w(t,n.opt,t=>q(G(n.content,e),[t])),!0}},model:{init:function(n,t,e){const i=I(t);return w(t,"input",()=>{const o=F(n.content,e);o.container[o.key]=t[i]}),!0},render:function(n,t,e){const i=I(t),o=F(n.content,e);return t[i]=o.val,!0}},bind:{render:(n,t,e)=>{t.setAttribute(n.opt,D(n.content,e).val);return!0}},text:{render:function(n,t,e){return t.textContent=String(D(n.content,e).val),!0}},html:{render:function(n,t,e){return t.innerHTML=String(D(n.content,e).val),!0}},for:{init:function(n,t,e){return h(t,"forbase",!0),J(t,!1),!1},render:function(n,t,e){const i=n.content.match(/(.+) of (.+)/),o=i[1],u=F(i[2],e).val;e.$children=[],r(l(t.parentElement.children),n=>{p(n,"dyn")&&n.remove()});for(let n of u){const i=t.cloneNode(!0),u=a(e.data);let r,c;h(i,"dyn",!0),m(i,"forbase"),m(i,"for"),J(i,!0),u[o]=n,r=t.insertAdjacentElement("beforebegin",i),c=new U(r,e.$parent,u),e.$children.push(c),c.init()}return!0}}}),R=(n,t)=>s(l(n).map(n=>g(n)?new U(n,t):n.children.length>0?R(n.children,t):null).filter(n=>null!==n)),U=class{constructor(n,t,e={}){const i=e;this.directives=$(n),this.data=A(i,this),this.$element=n,this.$parent=t,this.$children=R(n.children,this)}run(n){return!!this.directives.map(t=>{if(Q.has(t.name)){const e=Q.get(t.name);if(e[n])return e[n](t,this.$element,this)}return!0}).every(n=>!0===n)&&(this.$children.map(t=>t.run(n)),!0)}init(){return this.run("init")}render(){return this.run("render")}};return U}();
//# sourceMappingURL=axon.min.js.map
