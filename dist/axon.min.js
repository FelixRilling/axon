var Axon=function(){"use strict";const n=(n,t)=>typeof n===t,t=Array.isArray,e=t=>n(t,"undefined"),r=n=>!e(n),i=(n,t)=>r(n[t]),o=n=>e(n)||null===n,u=Object.entries,c=(n,t)=>n.forEach(t),f=(n,t)=>{c(u(n),(e,r)=>{t(e[1],e[0],r,n)})},s=t=>!o(t)&&(n(t,"object")||n(t,"function")),a=Number.isNaN,l=n=>{const e=[];c(n,n=>{t(n)?e.push(...l(n)):e.push(n)});return e},d=Array.from,h=n=>t(n)?d(n):Object.assign({},n),m=n=>new Map(u(n)),p=(n,t,e)=>n.setAttribute("x-"+t,e),v=(n,t)=>n.hasAttribute("x-"+t),b=(n,t)=>n.removeAttribute("x-"+t),g=n=>n.name.startsWith("x-"),$=n=>d(n.attributes).filter(g),x=n=>$(n).length>0,y=n=>$(n).map(n=>{const t=n.name.replace("x-","").split(":");return{name:t[0],opt:t[1]||!1,content:n.value}}),A=n=>({set:(t,e,r)=>{r!==t[e]&&(t[e]=r,n.render());return!0}}),w=(n,t)=>{const e=n;f(e,(n,r)=>{s(n)&&(e[r]=w(n,t))});return new Proxy(n,t)},N=(n,t)=>w(n,A(t)),E=(n,t,e)=>n.addEventListener(t,e),j=/^["'`].*["'`]$/,C=/^.+\(.*\)$/,L=n=>n.substr(1,n.length-2),M=(n,t,e=!1)=>{const r=t.split(/(?:\.|\[|\])+/g).map(n=>j.test(n)?L(n):n);let u=n;let c=null;let f=null;let s=0;for(;!o(u)&&s<r.length;){if(f=r[s],!i(u,f))return null;c=u,u=u[f],s++}return e?{val:u,container:c,key:f,index:s}:u},k=m({false:!1,true:!0}),H=(n,t)=>{if(t)return!1;throw new Error(`missing prop/method '${n}'`)},O=(n,t=[])=>n.val.apply(n.node.data,[...n.args,...t]),S=(n,t)=>{let e=null;e=a(Number(n))?j.test(n)?L(n):k.has(n)?k.get(n):B(n,t).val:Number(n);return e},T=(n,t,e=!1)=>{if(C.test(n)){const r=P(n,t,e),i=O(r);return{node:r.node,val:i}}return B(n,t,e)},B=(n,t,e=!1)=>{let r=t;for(;r;){const t=M(r.data,n,!0);if(null!==t)return t.node=r,t;r=r.$parent}return H(n,e)},P=(n,t,e=!1)=>{const i=n.match(/(.+)\s?\((.*)\)/);const o=r(i[2])?i[2].split(","):[];const u=F(t);const c=M(u.methods,i[1],!0);return null!==c?(c.args=o.map(n=>S(n,t)),c.node=u,c):H(n,e)},W=n=>r(n.value)?"value":r(n.textContent)?"textContent":"innerHTML",q=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden",!0),z=function(n,t,e){const r=Boolean(T(n.content,e,!0).val);return q(t,r),r},D=m({if:{init:z,render:z},on:{init:function(n,t,e){return E(t,n.opt,t=>O(P(n.content,e),[t])),!0}},model:{init:function(n,t,e){const r=W(t);return E(t,"input",()=>{const i=B(n.content,e);i.container[i.key]=t[r]}),!0},render:function(n,t,e){const r=W(t),i=B(n.content,e);return t[r]=i.val,!0}},bind:{render:(n,t,e)=>{t.setAttribute(n.opt,T(n.content,e).val);return!0}},text:{render:function(n,t,e){return t.textContent=String(T(n.content,e).val),!0}},html:{render:function(n,t,e){return t.innerHTML=String(T(n.content,e).val),!0}},for:{init:function(n,t,e){return p(t,"forbase",!0),q(t,!1),!1},render:function(n,t,e){const r=n.content.match(/(.+) of (.+)/),i=r[1],o=B(r[2],e).val;e.$children=[],c(d(t.parentElement.children),n=>{v(n,"dyn")&&n.remove()});for(let n of o){const r=t.cloneNode(!0),o=h(e.data);let u,c;p(r,"dyn",!0),b(r,"forbase"),b(r,"for"),q(r,!0),o[i]=n,u=t.insertAdjacentElement("beforebegin",r),c=new I(u,e.$parent,o),e.$children.push(c),c.init()}return!0}}}),F=n=>{let t=n;for(;null!==t.$parent;)t=t.$parent;return t},G=(n,t)=>l(d(n).map(n=>x(n)?new I(n,t):n.children.length>0?G(n.children,t):null).filter(n=>null!==n)),I=class{constructor(n,t,e={}){const r=e;this.directives=y(n),this.data=N(r,this),this.$element=n,this.$parent=t,this.$children=G(n.children,this)}run(n){return!!this.directives.map(t=>{if(D.has(t.name)){const e=D.get(t.name);if(e[n])return e[n](t,this.$element,this)}return!0}).every(n=>!0===n)&&this.$children.map(t=>t.run(n))}init(){return this.run("init")}render(){return this.run("render")}};return class extends I{constructor(n={}){super(n.el,null,n.data),this.methods=n.methods||{},this.init(),this.render()}}}();
