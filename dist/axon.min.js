var Axon=function(){"use strict";const n=n=>Array.isArray(n),t=(n,t)=>typeof n===t,e=n=>t(n,"undefined"),r=n=>!e(n),i=n=>Object.entries(n),o=(n,t)=>n.forEach(t),u=n=>Array.from(n),c=t=>{const e=[];o(t,t=>{n(t)?e.push(...c(t)):e.push(t)});return e},f=n=>new Map(i(n)),s=function(n,t=document,e=!1){return e?u(t.querySelectorAll(n)):t.querySelector(n)},l=(n,t,e)=>n.setAttribute("x-"+t,e),a=(n,t)=>n.hasAttribute("x-"+t),_=(n,t)=>n.removeAttribute("x-"+t),d=n=>n.name.startsWith("x-"),h=n=>u(n.attributes).filter(d),m=n=>h(n).length>0,p=function(n){return h(n).map(n=>{const t=n.name.replace("x-","").split(":");return{_content:n.value,_name:t[0],_opt:t[1]||!1}})},v=function(n,t,e){const r=function(t){return m(t)?new e(t,n,{}):t.children.length>0?i(t.children):null},i=n=>c(u(n).map(r).filter(n=>null!==n));return i(t)},b={get:(n,t)=>t in n.data?n.data[t]:n[t],set:(n,t,e)=>{t in n?n[t]=e:n.data[t]=e;return!0}},g=function(n,t,e){n.addEventListener(t,e,!1)},y=/^[\d.-]+$/,x=/^["'`].*["'`]$/,A=/^.+\(.*\)$/,w=f({false:!1,true:!0,null:null}),E=function(n,t){return y.test(n)?Number(n):x.test(n)?n.substr(1,n.length-2):w.has(n)?w.get(n):$(n,t)._val},S=function(n,t){const e=t.split(".");let i,o=n,u=0;for(;u<e.length;){if(i=o[e[u]],r(i)){if(!(u<e.length-1))return{_val:i,_container:o,_key:e[u]};o=i}u++}return!1},j=n=>new Error(`missing prop/method '${n}'`),C=n=>n._val.apply(n._node,n._args),L=function(n){let t=n;for(;null!==t._parent;)t=t._parent;return t},M=function(n,t,e=!1){if(A.test(n)){const r=k(n,t,e),i=C(r);return{_node:r.node,_val:i}}return $(n,t,e)},$=function(n,t,e=!1){let r=t;for(;r&&!1!==r._parent;){const t=S(r.data,n);if(!1!==t)return t._node=r,t;r=r._parent}if(e)return!1;throw j(n)},k=function(n,t,e=!1){const i=n.match(/([\w.]+)\s*\(((?:[^()]*)*)?\s*\)/),o=r(i[2])?i[2].split(","):[],u=L(t),c=S(u.methods,i[1]);if(!1!==c)return c._args=o.map(n=>E(n,t)),c._node=u,c;if(e)return!1;throw j(n)},q=function(n){return r(n.value)?"value":r(n.textContent)?"textContent":"innerHTML"},H=(n,t)=>t?n.removeAttribute("hidden"):n.setAttribute("hidden",!0),N=/(\w+) in (\w+)/,O=function(n,t){const e=t._element,r=Boolean(M(n._content,t,!0)._val);return H(e,r),r},T=f({model:{_init:function(n,t){const e=t._element,r=q(e);return g(e,"input",function(){const i=$(n._content,t);i._container[i._key]=e[r],i._node.render()}),!0},_render:function(n,t){const e=t._element,r=q(e),i=$(n._content,t);return e[r]=String(i._val),!0}},bind:{_render:function(n,t){return t._element.setAttribute(n._opt,M(n._content,t)._val),!0}},for:{_init:function(n,t){const e=t._element;return l(t._element,"forbase",!0),H(e,!1),!1},_render:function(n,t,e){const r=t._element,i=N.exec(n._content),c=i[1],f=$(i[2],t)._val,s=[];o(u(r.parentElement.children),n=>{a(n,"dyn")&&n.remove()});for(let n of f){const i=r.cloneNode(!0),o=Object.assign({},t.data);let u;l(i,"dyn",!0),_(i,"forbase"),_(i,"for"),H(i,!0),o[c]=n,u=r.insertAdjacentElement("beforebegin",i),s.push(new e(u,t._parent,o))}return t._children=s,!0}},text:{_render:function(n,t){return t._element.textContent=String(M(n._content,t)._val),!0}},html:{_render:function(n,t){return t._element.innerHTML=String(M(n._content,t)._val),!0}},if:{_init:O,_render:O},on:{_init:function(n,t){return g(t._element,n._opt,()=>C(k(n._content,t))),!0}}}),B=class{constructor(n=null,t=null,e={},r=!1){const i=new Proxy(this,b);return this.data=e,this.directives=p(n),this._element=n,this._parent=t,this._children=v(i,n.children,B),r?[this,i]:i}run(n){const t=t=>{if(T.has(t._name)){const e=T.get(t._name);if(e[n])return e[n](t,this,B)}return!0};return!!this.directives.map(t).every(n=>!0===n)&&this._children.map(t=>t.run(n))}init(){return this.run("_init")}render(){return this.run("_render")}};return class extends B{constructor(n={}){const t=super(s(n.el),null,n.data,!0);return t[0].methods=n.methods||{},t[0].init(),t[0].render(),t[1]}}}();
