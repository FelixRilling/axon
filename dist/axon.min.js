var Axon=function(){"use strict";const n=n=>Array.from(n),t=n=>Array.isArray(n),e=function(n){const r=[];return n.forEach(n=>{t(n)?r.push(...e(n)):r.push(n)}),r},r=n=>void 0!==n,i=function(t,e=document,r=!1){return r?n(e.querySelectorAll(t)):e.querySelector(t)},o=n=>n.name.startsWith("x-"),u=t=>n(t.attributes).some(o),c=function(t){return n(t.attributes).filter(o).map(n=>{const t=n.name.replace("x-","").split(":");const e=n.value;return{val:e,name:t[0],opt:t[1]||!1}})},l=function(t,r,i){const o=function(n){return u(n)?new i(n,t,{}):n.children.length>0?c(n.children):null},c=t=>e(n(t).map(o).filter(n=>null!==n));return c(r)},f={get:(n,t)=>t in n.data?n.data[t]:n[t]},s=function(n,t,e){n.addEventListener(t,e,!1)},a=/\(.*\)/,d=/^[\d\.]+$/,h=/^'\w+'$/,m=/([\w\.]+)\s*\(((?:[^()]*)*)?\s*\)/,v=n=>new Error(`missing prop/method '${n}'`),p=n=>n.val.apply(n.node,n.args),_=function(n,t){return d.test(n)?Number(n):h.test(n)?n.substr(1,n.length-2):x(n,t)},y=function(n){let t=n;for(;null!==t._parent;)t=t._parent;return t},b=function(n,t){const e=t.split(".");let i,o=n,u=0;for(;u<e.length;){const n=e[u];if(i=o[n],r(i)){if(!(u<e.length-1))return{val:i,con:o,key:n};o=i}u++}return!1},g=function(n,t,e=!1){if(a.test(n)){const r=A(n,t,e),i=p(r);return{node:r.node,val:i}}return x(n,t,e)},x=function(n,t,e=!1){let r=t;for(;r&&!1!==r._parent;){const t=b(r.data,n);if(!1!==t)return t.node=r,t;r=r._parent}if(e)return!1;throw v(n)},A=function(n,t,e=!1){const i=n.match(m),o=r(i[2])?i[2].split(","):[],u=y(t),c=b(u.methods,i[1]);if(!1!==c)return c.args=o.map(n=>_(n,t)),c.node=u,c;if(e)return!1;throw v(n)},w=function(n){return r(n.value)?"value":r(n.textContent)?"textContent":"innerHTML"},C=function(n,t){const e=t._element;return g(n.val,t,!0).val?(e.removeAttribute("hidden"),!0):(e.setAttribute("hidden",!0),!1)},E={model:{init:function(n,t){const e=t._element,r=w(e);return s(e,"input",function(){const i=x(n.val,t);i.con[i.key]=e[r],i.node.render()}),!0},render:function(n,t){const e=t._element,r=w(e),i=x(n.val,t);return e[r]=String(i.val),!0}},bind:{render:function(n,t){return t._element.setAttribute(n.opt,g(n.val,t).val),!0}},for:{render:function(n,t){const e=n.val.split(" "),r=e[0],i=x(e[2],t);return console.log({iterator:r,iterable:i}),!1}},text:{render:function(n,t){return t._element.textContent=g(n.val,t).val,!0}},html:{render:function(n,t){return t._element.innerHTML=g(n.val,t).val,!0}},if:{init:C,render:C},on:{init:function(n,t){const e=A(n.val,t);return s(t._element,n.opt,()=>p(e)),!0}}},L=class{constructor(n=null,t=null,e={}){const r=new Proxy(this,f);return r.data=e,r._element=n,r._parent=t,r._children=l(r,n.children,L),r.directives=c(n),r}run(n){const t=t=>{const e=E[t.name];return!e||!e[n]||e[n](t,this)};return!!this.directives.map(t).every(n=>!0===n)&&this._children.map(t=>t.run(n))}init(){return this.run("init")}render(){return this.run("render")}};return class extends L{constructor(n={}){super(i(n.el),null,n.data),this.methods=n.methods||{},this.init(),this.render()}}}();