var Axon=function(){"use strict";const n=20,t="input",e="x-",r="hidden",o="value",i="textContent",c="innerHTML",u=["'",'"',"`"],s=function(n){const t=Array.from(n.attributes),r=[];return t.forEach(n=>{if(n.name.substr(0,e.length)===e){const t=n.name.replace(e,"").split(":");r.push({key:t[0],opt:t[1]||!1,val:n.value})}}),r},f=function(n){return"undefined"!=typeof n},a=function(n){const t=function(n){const e=s(n),r=n.children;if(e.length||r.length){let o={node:n,directives:e,children:[]};const i=Array.from(r);return i.forEach(n=>{const e=t(n);f(e)&&o.children.push(e)}),o}};return t(n)},l=function(){return!1},d=function(n,t){const e=t.substr(0,t.length-1).split("("),r=e[0],o=e[1].split(",").filter(n=>""!==n).map(t=>{return p(n,t)}),i=n[r];if("function"==typeof i)return{fn:i,args:o};throw new Error(`Missing method '${t}'`)},h=function(n,t){const e=t.split("."),r={val:null,ref:null};let o,i=n;return e.forEach((n,c)=>{if(o=i[n],!f(o))throw new Error(`Missing prop '${t}'`);c<e.length-1?i=o:(r.val=o,r.ref=i)}),r},p=function(n,t){if(isNaN(Number(t))){if(u.includes(t.substr(0,1)))return t.substr(1,t.length-2);if(")"===t.substr(t.length-1)){const e=d(n.$methods,t);return e.fn.apply(n,e.args)}return h(n.$data,t).val}return Number(t)},$=function(n,t,e){const o=p(e,t.val),i=Boolean(o);return i?n.removeAttribute(r):n.setAttribute(r,r),i},m=function(n,t,e){let r;return function(){const o=this,i=Array.from(arguments),c=e&&!r,u=function(){r=null,e||n.apply(o,i)};clearTimeout(r),r=setTimeout(u,t),c&&n.apply(o,i)}},v=function(n){return f(n[o])?o:f(n[i])?i:c},g=function(t,e,r,o,i){const c=m(r,n),u=v(t),s=function(n){const t=n.target,e=Array.from(o);return e.push(t[u],t,n),c.apply(i,e)};return t.addEventListener(e,s,!1)},b=function(n,t,e){const r=d(e.$methods,t.val);return g(n,t.opt,r.fn,r.args,e),!0},y=function(e,r,o,i){const c=h(o.$data,r.val),u=function(t,e){c.ref[r.val]=e,setTimeout(()=>{i.$render()},n)};return g(e,t,u,[c.val],o),!0},E=function(n,t,e){const r=v(n),o=h(e.$data,t.val);return n[r]=o.val,!0},A=function(n,t,e){const r=p(e,t.val);return n.setAttribute(t.opt,r),!0},N=function(n,t,e){const r=t.val.split(" "),o={val:r[0],in:p(e,r[2])};return t.data=o,console.log("FOR INIT",o),!0},x=function(n,t,e,r,o){const i="x-clone",c=t.data.in,u=n.parentNode,s=Array.from(u.children);return s.forEach(n=>{n.hasAttribute(i)&&n.remove()}),c.forEach((t,e)=>{if(0===e);else{const t=n.cloneNode(!0);t.setAttribute(i,!0),u.appendChild(t)}console.log([t,e])}),o=a(u),console.log("FOR RENDER",n),!0},T={ignore:{init:l,render:l},if:{render:$},on:{init:b},model:{init:y,render:E},bind:{render:A},for:{init:N,render:x}},w=function(n,t,e){console.log([n,t,e]);const r={$data:n.$data,$methods:n.$methods},o={$render:n.$render.bind(n),$init:n.$init.bind(n)},i=function(n){const t=n.children,c=n.directives;let u=!0;c.length&&n.directives.forEach(t=>{const i=T[t.key];if(i){const c=i[e];if(c){const e=c(n.node,t,r,o,n);e||(u=!1)}}}),u&&t.length&&t.forEach(n=>{i(n)})};i(t)},R=class{constructor(n){const t=this;return t.$context=document.querySelector(n.context),t.$data=n.data,t.$methods=n.methods,t.$cache={},t.$init(),t.$render(),t}$init(n){const t=this;let e;t.$cache=a(t.$context),e=f(n)?n:t.$cache,w(t,e,"init")}$render(n){const t=this,e=f(n)?n:t.$cache;w(t,e,"render")}};return R}();